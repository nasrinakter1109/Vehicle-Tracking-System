{"version":3,"file":"ngx-clipboard.umd.js.map","sources":["ng://ngx-clipboard/lib/ngx-clipboard.service.ts","ng://ngx-clipboard/lib/ngx-clipboard.directive.ts","ng://ngx-clipboard/lib/ngx-clipboard.module.ts"],"sourcesContent":["import { Inject, Injectable, InjectionToken, Optional, SkipSelf } from '@angular/core';\r\nimport { DOCUMENT } from '@angular/platform-browser';\r\nimport { WINDOW } from 'ngx-window-token';\r\n\r\n@Injectable()\r\nexport class ClipboardService {\r\n    private tempTextArea: HTMLTextAreaElement | undefined;\r\n    constructor(@Inject(DOCUMENT) public document: any, @Inject(WINDOW) private window: any) {}\r\n    public get isSupported(): boolean {\r\n        return !!this.document.queryCommandSupported && !!this.document.queryCommandSupported('copy');\r\n    }\r\n\r\n    public isTargetValid(element: HTMLInputElement | HTMLTextAreaElement): boolean {\r\n        if (element instanceof HTMLInputElement || element instanceof HTMLTextAreaElement) {\r\n            if (element.hasAttribute('disabled')) {\r\n                throw new Error('Invalid \"target\" attribute. Please use \"readonly\" instead of \"disabled\" attribute');\r\n            }\r\n            return true;\r\n        }\r\n        throw new Error('Target should be input or textarea');\r\n    }\r\n\r\n    /**\r\n     * copyFromInputElement\r\n     */\r\n    public copyFromInputElement(targetElm: HTMLInputElement | HTMLTextAreaElement): boolean {\r\n        try {\r\n            this.selectTarget(targetElm);\r\n            const re = this.copyText();\r\n            this.clearSelection(targetElm, this.window);\r\n            return re && this.isCopySuccessInIE11();\r\n        } catch (error) {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    // this is for IE11 return true even if copy fail\r\n    isCopySuccessInIE11() {\r\n        const clipboardData = this.window['clipboardData'];\r\n        if (clipboardData && clipboardData.getData) {\r\n            if (!clipboardData.getData('Text')) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Creates a fake textarea element, sets its value from `text` property,\r\n     * and makes a selection on it.\r\n     */\r\n    public copyFromContent(content: string, container: HTMLElement = this.window.document.body) {\r\n        // check if the temp textarea is still belong the current container.\r\n        // In case we have multiple places using ngx-clipboard, one is in a modal using container but the other one is not.\r\n        if (this.tempTextArea && !container.contains(this.tempTextArea)) {\r\n            this.destroy(this.tempTextArea.parentElement);\r\n        }\r\n\r\n        if (!this.tempTextArea) {\r\n            this.tempTextArea = this.createTempTextArea(this.document, this.window);\r\n            try {\r\n                container.appendChild(this.tempTextArea);\r\n            } catch (error) {\r\n                throw new Error('Container should be a Dom element');\r\n            }\r\n        }\r\n        this.tempTextArea.value = content;\r\n        return this.copyFromInputElement(this.tempTextArea);\r\n    }\r\n\r\n    // remove temporary textarea if any\r\n    public destroy(container: HTMLElement = this.window.document.body) {\r\n        if (this.tempTextArea) {\r\n            container.removeChild(this.tempTextArea);\r\n            // removeChild doesn't remove the reference from memory\r\n            this.tempTextArea = undefined;\r\n        }\r\n    }\r\n\r\n    // select the target html input element\r\n    private selectTarget(inputElement: HTMLInputElement | HTMLTextAreaElement): number | undefined {\r\n        inputElement.select();\r\n        inputElement.setSelectionRange(0, inputElement.value.length);\r\n        return inputElement.value.length;\r\n    }\r\n\r\n    private copyText(): boolean {\r\n        return this.document.execCommand('copy');\r\n    }\r\n    // Removes current selection and focus from `target` element.\r\n    private clearSelection(inputElement: HTMLInputElement | HTMLTextAreaElement, window: Window) {\r\n        // tslint:disable-next-line:no-unused-expression\r\n        inputElement && inputElement.blur();\r\n        window.getSelection().removeAllRanges();\r\n    }\r\n\r\n    // create a fake textarea for copy command\r\n    private createTempTextArea(doc: Document, window: Window): HTMLTextAreaElement {\r\n        const isRTL = doc.documentElement.getAttribute('dir') === 'rtl';\r\n        let ta: HTMLTextAreaElement;\r\n        ta = doc.createElement('textarea');\r\n        // Prevent zooming on iOS\r\n        ta.style.fontSize = '12pt';\r\n        // Reset box model\r\n        ta.style.border = '0';\r\n        ta.style.padding = '0';\r\n        ta.style.margin = '0';\r\n        // Move element out of screen horizontally\r\n        ta.style.position = 'absolute';\r\n        ta.style[isRTL ? 'right' : 'left'] = '-9999px';\r\n        // Move element to the same position vertically\r\n        const yPosition = window.pageYOffset || doc.documentElement.scrollTop;\r\n        ta.style.top = yPosition + 'px';\r\n        ta.setAttribute('readonly', '');\r\n        return ta;\r\n    }\r\n}\r\n// this pattern is mentioned in https://github.com/angular/angular/issues/13854 in #43\r\nexport function CLIPBOARD_SERVICE_PROVIDER_FACTORY(doc: Document, win: Window, parentDispatcher: ClipboardService) {\r\n    return parentDispatcher || new ClipboardService(doc, win);\r\n}\r\n\r\nexport const CLIPBOARD_SERVICE_PROVIDER = {\r\n    deps: [DOCUMENT as InjectionToken<Document>, WINDOW as InjectionToken<Window>, [new Optional(), new SkipSelf(), ClipboardService]],\r\n    provide: ClipboardService,\r\n    useFactory: CLIPBOARD_SERVICE_PROVIDER_FACTORY\r\n};\r\n","import { Directive, EventEmitter, HostListener, Input, OnDestroy, OnInit, Output } from '@angular/core';\r\n\r\nimport { ClipboardService } from './ngx-clipboard.service';\r\n\r\n@Directive({\r\n    // tslint:disable-next-line:directive-selector\r\n    selector: '[ngxClipboard]'\r\n})\r\nexport class ClipboardDirective implements OnInit, OnDestroy {\r\n    // tslint:disable-next-line:no-input-rename\r\n    @Input('ngxClipboard')\r\n    public targetElm: HTMLInputElement;\r\n    @Input()\r\n    public container: HTMLInputElement;\r\n\r\n    @Input()\r\n    public cbContent: string;\r\n\r\n    @Output()\r\n    public cbOnSuccess: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n    @Output()\r\n    public cbOnError: EventEmitter<any> = new EventEmitter<any>();\r\n    constructor(private clipboardSrv: ClipboardService) {}\r\n\r\n    // tslint:disable-next-line:no-empty\r\n    public ngOnInit() {}\r\n\r\n    public ngOnDestroy() {\r\n        this.clipboardSrv.destroy(this.container);\r\n    }\r\n\r\n    @HostListener('click', ['$event.target'])\r\n    public onClick(event: Event) {\r\n        if (!this.clipboardSrv.isSupported) {\r\n            this.handleResult(false, undefined, event);\r\n        } else if (this.targetElm && this.clipboardSrv.isTargetValid(this.targetElm)) {\r\n            this.handleResult(this.clipboardSrv.copyFromInputElement(this.targetElm), this.targetElm.value, event);\r\n        } else if (this.cbContent) {\r\n            this.handleResult(this.clipboardSrv.copyFromContent(this.cbContent, this.container), this.cbContent, event);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Fires an event based on the copy operation result.\r\n     * @param succeeded\r\n     */\r\n    private handleResult(succeeded: boolean, copiedContent: string | undefined, event: Event) {\r\n        if (succeeded) {\r\n            this.cbOnSuccess.emit({ isSuccess: true, content: copiedContent, event: event });\r\n        } else {\r\n            this.cbOnError.emit({ isSuccess: false, event: event });\r\n        }\r\n    }\r\n}\r\n","import { ClipboardDirective } from './ngx-clipboard.directive';\nimport { CLIPBOARD_SERVICE_PROVIDER } from './ngx-clipboard.service';\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { NgxWindowTokenModule } from 'ngx-window-token';\nexport * from './ngx-clipboard.directive';\nexport * from './ngx-clipboard.service';\n\n@NgModule({\n  imports: [CommonModule, NgxWindowTokenModule],\n  // tslint:disable-next-line:object-literal-sort-keys\n  declarations: [ClipboardDirective],\n  exports: [ClipboardDirective],\n  providers: [CLIPBOARD_SERVICE_PROVIDER]\n})\nexport class ClipboardModule {}\n"],"names":["Injectable","Inject","DOCUMENT","WINDOW","Optional","SkipSelf","EventEmitter","Directive","Input","Output","HostListener","NgModule","CommonModule","NgxWindowTokenModule"],"mappings":"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"}
