!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/forms"),require("@angular/platform-browser"),require("@angular/common")):"function"==typeof define&&define.amd?define("ngx-markdown-editor",["exports","@angular/core","@angular/forms","@angular/platform-browser","@angular/common"],t):t(e["ngx-markdown-editor"]={},e.ng.core,e.ng.forms,e.ng.platformBrowser,e.ng.common)}(this,function(e,t,n,r,i){"use strict";var o=function(){function e(e,t,n,r){void 0===e&&(e=!1),void 0===t&&(t=-1),this.required=e,this.maxlength=t,this._renderer=n,this._domSanitizer=r,this.hideToolbar=!1,this.height="300px",this._options={},this.hideIcons={},this.showPreviewPanel=!0,this.isFullScreen=!1,this.dragover=!1,this.isUploading=!1,this._defaultOption={showBorder:!0,hideIcons:[],scrollPastEnd:0,enablePreviewContentClick:!1},this._onChange=function(e){},this._onTouched=function(){}}return Object.defineProperty(e.prototype,"mode",{get:function(){return this._mode||"editor"},set:function(e){(!e||"editor"!==e.toLowerCase()&&"preview"!==e.toLowerCase())&&(e="editor"),this._mode=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this._options||{}},set:function(e){var t=this;this._options=Object.assign(this._defaultOption,{},e),this.hideIcons={},this._options.hideIcons&&this._options.hideIcons.forEach(function(e){return t.hideIcons[e]=!0})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"markdownValue",{get:function(){return this._markdownValue||""},set:function(t){var n=this;this._markdownValue=t,this._onChange(t),this.preRender&&this.preRender instanceof Function&&(t=this.preRender(t)),null!==t&&t!==undefined&&(this._renderMarkTimeout&&clearTimeout(this._renderMarkTimeout),this._renderMarkTimeout=setTimeout(function(){var e=marked(t||"",n._markedOpt);n.previewHtml=n._domSanitizer.bypassSecurityTrustHtml(e)},100))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_hasUploadFunction",{get:function(){return this.upload&&this.upload instanceof Function},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=new marked.Renderer;e.code=function(e,t){return'<pre style="padding: 0; border-radius: 0;"><code class="hljs '+t+'">'+(!(!t||!hljs.getLanguage(t))?hljs.highlight(t,e).value:e)+"</code></pre>"},e.table=function(e,t){return'<table class="table table-bordered">\n<thead>\n'+e+"</thead>\n<tbody>\n"+t+"</tbody>\n</table>\n"},e.listitem=function(e){return/^\s*\[[x ]\]\s*/.test(e)?'<li style="list-style: none;">'+(e=e.replace(/^\s*\[ \]\s*/,'<i class="fa fa-square-o" style="margin: 0 0.2em 0.25em -1.6em;"></i> ').replace(/^\s*\[x\]\s*/,'<i class="fa fa-check-square" style="margin: 0 0.2em 0.25em -1.6em;"></i> '))+"</li>":"<li>"+e+"</li>"};var t={renderer:e,highlight:function(e){return hljs.highlightAuto(e).value}};this._markedOpt=Object.assign({},this.options.markedjsOpt,t)},e.prototype.ngAfterViewInit=function(){var n=this,e=this.aceEditorContainer.nativeElement;this._editor=ace.edit(e),this._editor.$blockScrolling=Infinity,this._editor.getSession().setUseWrapMode(!0),this._editor.getSession().setMode("ace/mode/markdown"),this._editor.setValue(this.markdownValue||"",1),this._editor.setOption("scrollPastEnd",this._options.scrollPastEnd||0),this._editor.on("change",function(e){var t=n._editor.getValue();n.markdownValue=t})},e.prototype.ngOnDestroy=function(){this._editor&&this._editor.destroy()},e.prototype.writeValue=function(e){var t=this;setTimeout(function(){void 0!==(t.markdownValue=e)&&t._editor&&t._editor.setValue(e||"",1)},1)},e.prototype.registerOnChange=function(e){this._onChange=e},e.prototype.registerOnTouched=function(e){this._onTouched=e},e.prototype.validate=function(e){var t=null;return this.required&&0===this.markdownValue.length&&(t={required:!0}),0<this.maxlength&&this.markdownValue.length>this.maxlength&&(t={maxlength:!0}),t},e.prototype.insertContent=function(e,t){if(this._editor){var n=this._editor.getSelectedText(),r=!!n,i=2,o="",a=this._editor.selection.getRange();switch(e){case"Bold":o="Bold Text",n="**"+(n||o)+"**";break;case"Italic":o="Italic Text",n="*"+(n||o)+"*",i=1;break;case"Heading":o="Heading",n="# "+(n||o);break;case"Refrence":o="Refrence",n="> "+(n||o);break;case"Link":n="[](http://)",i=1;break;case"Image":n="![](http://)";break;case"Ul":n="- "+(n||o);break;case"Ol":n="1. "+(n||o),i=3;break;case"Code":o="Source Code",n="```language\r\n"+(n||o)+"\r\n```",i=3;break;case"Custom":n=t,i=0}this._editor.session.replace(a,n),r||(a.start.column+=i,a.end.column=a.start.column+o.length,this._editor.selection.setRange(a)),this._editor.focus()}},e.prototype.togglePreview=function(){this.showPreviewPanel=!this.showPreviewPanel,this.editorResize()},e.prototype.previewPanelClick=function(e){!0!==this.options.enablePreviewContentClick&&(e.preventDefault(),e.stopImmediatePropagation())},e.prototype.fullScreen=function(){this.isFullScreen=!this.isFullScreen,this._renderer.setElementStyle(document.body,"overflowY",this.isFullScreen?"hidden":"auto"),this.editorResize()},e.prototype.editorResize=function(e){var t=this;void 0===e&&(e=100),this._editor&&setTimeout(function(){t._editor.resize(),t._editor.focus()},e)},e.prototype.onDragover=function(e){e.stopImmediatePropagation(),e.preventDefault(),this._hasUploadFunction&&(this.dragover=!0)},e.prototype.onDrop=function(e){var c=this;e.stopImmediatePropagation(),e.preventDefault(),this._hasUploadFunction&&!this.isUploading&&(e.dataTransfer.files&&0!==e.dataTransfer.files.length?(this.isUploading=!0,Promise.resolve().then(function(){return c.upload(e.dataTransfer.files)}).then(function(e){var t,n;if(Array.isArray(e)){var r=[];try{for(var i=function d(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}(e),o=i.next();!o.done;o=i.next()){var a=o.value,s="["+a.name+"]("+a.url+")";a.isImg&&(s="!"+s),r.push(s)}}catch(l){t={error:l}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(t)throw t.error}}c.insertContent("Custom",r.join("\r\n"))}else console.warn("Invalid upload result. Please using follow this type `UploadResult`.");c.isUploading=!1,c.dragover=!1})["catch"](function(e){console.error(e),c.isUploading=!1,c.dragover=!1})):this.dragover=!1)},e.prototype.onDragleave=function(e){e.stopImmediatePropagation(),e.preventDefault(),this._hasUploadFunction&&(this.dragover=!1)},e.decorators=[{type:t.Component,args:[{selector:"md-editor",template:'<div class="md-editor-container" [class.fullscreen]="isFullScreen">\r\n  <div class="tool-bar" *ngIf="!hideToolbar && mode != \'preview\'">\r\n    <div class="btn-group">\r\n      <button class="btn btn-sm btn-default" type="button" title="Bold" (click)="insertContent(\'Bold\')" *ngIf="!hideIcons.Bold">\r\n        <i class="fa fa-bold"></i>\r\n      </button>\r\n      <button class="btn btn-sm btn-default" type="button" title="Italic" (click)="insertContent(\'Italic\')" *ngIf="!hideIcons.Italic">\r\n        <i class="fa fa-italic"></i>\r\n      </button>\r\n      <button class="btn btn-sm btn-default" type="button" title="Heading" (click)="insertContent(\'Heading\')" *ngIf="!hideIcons.Heading">\r\n        <i class="fa fa-header"></i>\r\n      </button>\r\n      <button class="btn btn-sm btn-default" type="button" title="Refrence" (click)="insertContent(\'Refrence\')" *ngIf="!hideIcons.Refrence">\r\n        <i class="fa fa-quote-left"></i>\r\n      </button>\r\n    </div>\r\n    <div class="btn-group">\r\n      <button class="btn btn-sm btn-default" type="button" title="Link" (click)="insertContent(\'Link\')" *ngIf="!hideIcons.Link">\r\n        <i class="fa fa-link"></i>\r\n      </button>\r\n      <button class="btn btn-sm btn-default" type="button" title="Image" (click)="insertContent(\'Image\')" *ngIf="!hideIcons.Image">\r\n        <i class="fa fa-image"></i>\r\n      </button>\r\n    </div>\r\n    <div class="btn-group">\r\n      <button class="btn btn-sm btn-default" type="button" title="Unordered List" (click)="insertContent(\'Ul\')" *ngIf="!hideIcons.Ul">\r\n        <i class="fa fa-list-ul"></i>\r\n      </button>\r\n      <button class="btn btn-sm btn-default" type="button" title="Ordered List" (click)="insertContent(\'Ol\')" *ngIf="!hideIcons.Ol">\r\n        <i class="fa fa-list-ol"></i>\r\n      </button>\r\n      <button class="btn btn-sm btn-default" type="button" title="Code Block" (click)="insertContent(\'Code\')" *ngIf="!hideIcons.Code">\r\n        <i class="fa fa-file-code-o"></i>\r\n      </button>\r\n    </div>\r\n    <div class="btn-group">\r\n      <button class="btn btn-sm btn-default" type="button" [attr.title]="showPreviewPanel ? \'Hide Preview\' : \'Show Preview\'"\r\n        (click)="togglePreview()" *ngIf="!hideIcons.TogglePreview">\r\n        <i class="fa" [class.fa-eye]="!showPreviewPanel" [class.fa-eye-slash]="showPreviewPanel"></i>\r\n      </button>\r\n    </div>\r\n    <div class="btn-group pull-right hide-split">\r\n      <button class="btn btn-sm btn-default" type="button" [class.active]="isFullScreen" (click)="fullScreen()" *ngIf="!hideIcons.FullScreen">\r\n        <i class="fa fa-arrows-alt"></i>\r\n      </button>\r\n    </div>\r\n  </div>\r\n  <div class="editor-container">\r\n    <div [class.dragover]="dragover" [style.display]="mode == \'preview\' ? \'none\' : null" (dragover)="onDragover($event)">\r\n      <div class="drag-container">\r\n        <div class="upload-loading">\r\n          <i class="fa fa-upload" *ngIf="!isUploading"></i>\r\n          <i class="fa fa-spinner fa-pulse fa-fw" *ngIf="isUploading"></i>\r\n          <div class="text">{{ isUploading ? \'Uploading\' : \'Drag it here\' }}</div>\r\n        </div>\r\n      </div>\r\n      <div class="drag-container drag-container-mask" (drop)="onDrop($event)" (dragleave)="onDragleave($event)"></div>\r\n      <div class="editor-panel" [style.height]="height">\r\n        <div class="ace-editor" #aceEditor></div>\r\n      </div>\r\n    </div>\r\n    <div [style.display]="showPreviewPanel ? \'block\' : \'none\'" (click)="previewPanelClick($event)">\r\n      <div class="preview-panel" [innerHtml]="previewHtml" [style.height]="height"></div>\r\n    </div>\r\n  </div>\r\n  <div *ngIf="maxlength > 0 && mode != \'preview\'">\r\n    <div class="text-right md-footer">\r\n      {{ markdownValue?.length }} / {{ maxlength }}\r\n    </div>\r\n  </div>\r\n</div>\r\n',providers:[{provide:n.NG_VALUE_ACCESSOR,useExisting:t.forwardRef(function(){return e}),multi:!0},{provide:n.NG_VALIDATORS,useExisting:t.forwardRef(function(){return e}),multi:!0}],styles:[".md-editor-container{margin-bottom:15px;border:1px solid rgba(0,0,0,.1)}.md-editor-container.fullscreen{margin:0;position:fixed;border:0;top:0;left:0;width:100%;height:100%;z-index:99999999}.md-editor-container.fullscreen .editor-panel,.md-editor-container.fullscreen .preview-panel{height:calc(100vh - 40px)!important}.md-editor-container .ace-editor{height:100%}.md-editor-container .tool-bar{background-color:#f5f5f5;border-bottom:1px solid rgba(0,0,0,.1)}.md-editor-container .tool-bar .btn-group{padding:6px}.md-editor-container .tool-bar .btn-group>.btn:first-child::before{content:' ';background-color:#a9a9a9;width:1px;height:24px;left:-9px;top:2px;position:absolute}.md-editor-container .tool-bar .btn-group.hide-split>.btn:first-child::before,.md-editor-container .tool-bar .btn-group:first-child>.btn:first-child::before{display:none}.md-editor-container .tool-bar .btn{margin-bottom:0}.md-editor-container .editor-container{display:flex}.md-editor-container .editor-container>div .drag-container{display:none}.md-editor-container .editor-container>div.dragover{position:relative}.md-editor-container .editor-container>div.dragover .drag-container{display:block;position:absolute;left:0;top:0;right:0;bottom:0;z-index:10;background-color:rgba(0,0,0,.4);display:flex;align-items:center;justify-content:center;font-size:50px;color:#fff}.md-editor-container .editor-container>div.dragover .drag-container.drag-container-mask{background-color:transparent;z-index:11}.md-editor-container .editor-container>div.dragover .drag-container .upload-loading{display:flex;flex-direction:column;align-items:center}.md-editor-container .editor-container>div.dragover .drag-container .upload-loading .text{font-size:20px;margin-top:10px}.md-editor-container .editor-container>div{flex:1}.md-editor-container .preview-panel{border-left:1px solid rgba(0,0,0,.1);background-color:#fff;padding:10px;overflow-y:auto}.md-editor-container .md-footer{padding:2px;background-color:#f0f0f0;font-size:12px;border-top:1px solid rgba(0,0,0,.1)}"]}]}],e.ctorParameters=function(){return[{type:Boolean,decorators:[{type:t.Attribute,args:["required"]}]},{type:Number,decorators:[{type:t.Attribute,args:["maxlength"]}]},{type:t.Renderer},{type:r.DomSanitizer}]},e.propDecorators={aceEditorContainer:[{type:t.ViewChild,args:["aceEditor"]}],hideToolbar:[{type:t.Input}],height:[{type:t.Input}],preRender:[{type:t.Input}],upload:[{type:t.Input}],mode:[{type:t.Input}],options:[{type:t.Input}]},e}(),a=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{declarations:[o],imports:[i.CommonModule,n.FormsModule],exports:[o]}]}],e}();e.MarkdownEditorComponent=o,e.LMarkdownEditorModule=a,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-markdown-editor.umd.min.js.map